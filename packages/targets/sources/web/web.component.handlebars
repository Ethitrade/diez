class {{{componentName}}} {
  {{#if singleton}}
  constructor () {
    {{#each properties}}
    this.{{{@key}}} = {{{this.initializer}}};
    {{/each}}
  }
  {{else}}
  constructor({
    {{#each properties}}
    {{{@key}}}{{#unless @last}},{{/unless}}
    {{/each}}
  }) {
    {{#each properties}}
    this.{{{@key}}} = {{{@key}}};
    {{/each}}
  }
  {{/if}}

  update (payload) {
    if (!payload) {
      return this;
    }

    {{#each properties}}
    {{#if this.updateable}}
    {{!-- Note: we are forced to create a new object here due to a lack of reactive state. This should not be necessary. --}}
    this.{{{@key}}} = Object.assign(Object.create(Object.getPrototypeOf(this.{{{@key}}})), this.{{{@key}}}.update(payload.{{{@key}}}));
    {{else}}
    this.{{{@key}}} = payload.{{{@key}}};
    {{/if}}
    {{/each}}

    return this;
  }
}

{{#if public}}
{{{componentName}}}.name = '{{{componentName}}}';
{{/if}}

module.exports.{{{componentName}}} = {{{componentName}}};
